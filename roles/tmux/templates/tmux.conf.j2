# Set the base index for windows to 1 instead of 0
set-option -g base-index 1

# Set the base index for panes to 1 instead of 0
set-window-option -g pane-base-index 1

# Reload the file with Prefix-r
bind-key r source-file {{ tmux_config_dir }}/tmux.conf \; display "Reloaded configuration"

# Preserve the current path when opening new panes
bind-key '"' split-window -c "#{pane_current_path}"
bind-key % split-window -h -c "#{pane_current_path}"
bind-key c new-window -c "#{pane_current_path}"

# Mouse support
set-option -g mouse on

# Color support (mainly for vim)
set-option -g default-terminal "screen-256color"

# Load basic plugins
set-option -g @plugin "tmux-plugins/tmux-sensible"
set-option -g @plugin "tmux-plugins/tmux-resurrect"
set-option -g @plugin "tmux-plugins/tmux-continuum"

# Automatic environment restoration
set-option -g @continuum-restore "on"
set-option -g @resurrect-capture-pane-contents "on"

# Additional configuration
source-file -q {{ tmux_config_parts_dir }}/*

# Be explicit about the plugin path
set-environment -g TMUX_PLUGIN_MANAGER_PATH "{{ tmux_config_dir }}/plugins"

# Initialize tmux-plugin-manager
run-shell /usr/share/tmux-plugin-manager/tpm
